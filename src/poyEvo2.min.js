var pe={Evo:function(e,t,o,n,r,i,s){this.to=e,this.tp=t,this.rf=o,this.yf=n,this.bf=r,this.sf=i,this.stv=s,this.cbf=null,this.uid=++pe.conf.counter,this.cUB=this.stv&pe.state.canUnderBound,this.cHB=this.stv&pe.state.canHoverBound,this.iPe=this.stv&pe.state.isPersitent},conf:{refreshTime:30,counter:0,listOfEvos:new Array},start:function(){var e;for(e=0;e<pe.conf.listOfEvos.length;++e){var t=pe.conf.listOfEvos[e],o=t.bf();0>o&&!t.cUB?poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(0))):o>1&&!t.cHB?(poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(1))),t.iPe||(pe.conf.listOfEvos.splice(e,1),null!=t.cbf&&t.cbf(),--e)):(o=t.sf(o),poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(o))))}setTimeout(pe.start,pe.conf.refreshTime)},state:{canUnderBound:parseInt("1",2),canHoverBound:parseInt("10",2),isPersitent:parseInt("100",2),removeDoubles:parseInt("1000",2)},range:{fixed:function(e,t){return function(o){return(1-o)*e+o*t}},dynamic:function(e,t){return function(o){return(1-o)*e()+o*t()}}},syntax:{prefix_suffix:function(e,t){return function(o){return e+""+o+t}},suffix:function(e){return pe.syntax.prefix_suffix("",e)},none:function(){return arguments[0]},grayscale:function(){return v=parseInt(arguments[0]),"rgb("+v+","+v+","+v+")"},bgPosition:function(e,t,o){return function(n){""==e.style.backgroundPosition&&(e.style.backgroundPosition="center center");var r=e.style.backgroundPosition.split(" ");return"x"==t?n+o+" "+r[1]:r[0]+" "+n+o}}},shape:{linear:function(){return arguments[0]},sin:function(){var e=arguments[0];return e+Math.sin(2*Math.PI*e-Math.PI)/(2*Math.PI)},asin:function(){var e=arguments[0];return e+Math.sin(2*Math.PI*e)/(2*Math.PI)},ela:function(){var e=arguments[0];return Math.sqrt(e)+(1-e)*Math.sin(4*e*Math.PI/3)},pow:function(e){return function(t){return Math.pow(t,e)}},apow:function(e){return function(t){return 1-Math.pow(1-t,e)}},step:function(e,t){return function(o){return o=e(o),o=parseInt(o*t)/t}}},bind:{time:function(e,t){var o=new Date;o=o.getTime();var n=o+e,r=n+t;return function(){var e=new Date;return e=e.getTime(),(e-n)/(r-n)}},rotativeTime:function(e,t,o){var n=2*(e+t);return function(){var r=new Date;return r=r.getTime()+o,r%=n,r=Math.abs(r-n/2)-e/2,r/t}},stepTime:function(e,t){var o=e*t*pe.conf.refreshTime;return function(){var t=new Date;return t=t.getTime()%o,t=parseInt(t/o*e),t/e}},randTime:function(e){var t,o=0;return function(){return 1>o&&(o=e,t=Math.random()),--o,t}},mouse:function(e,t){return poyoCore_trackMouse(),void 0==t?pe.bind.property(poyoCore_mouse,e,"x"==e?poyoCore_wWidth:poyoCore_wHeight):pe.bind.lazyProperty(poyoCore_mouse,e,"x"==e?poyoCore_wWidth:poyoCore_wHeight,t)},scrollBar:function(e,t,o){var n,r="x"==t?"scrollLeft":"scrollTop",i=document.body,s=document.documentElement;return e==i||e==s?(window.scrollBy(1,1),e=s&&s.scrollTop?s:i,window.scrollBy(-1,-1),n="x"==t?function(){return e.scrollWidth-poyoCore_wWidth()}:function(){return e.scrollHeight-poyoCore_wHeight()}):n="x"==t?function(){return e.scrollWidth-e.offsetWidth}:function(){return e.scrollHeight-e.offsetHeight},void 0==o?pe.bind.property(e,r,n):pe.bind.lazyProperty(e,r,n,o)},property:function(e,t,o){return function(){return poyoCore_getAtribute(e,t)/o()}},lazyProperty:function(e,t,o,n){var r=poyoCore_getAtribute(e,t);return function(){return r=(1-n)*r+n*poyoCore_getAtribute(e,t),r/o()}}},overLay:{expand:function(e,t){return function(){var o=e();return o-=t.low,o/=t.high-t.low}}},delEvo:function(e){if(e instanceof Array)for(var t=0;t<e.length;++t)pe.delEvo(e[t]);else{var o=pe.aux.searchEvo(e);null!=o&&pe.conf.listOfEvos.splice(o,1)}},addEvo:{cpl:function(e,t,o,n,r,i,s){if(void 0==s&&(s=0),e instanceof Array||e instanceof NodeList){for(var u=[],a=0;a<e.length;++a)u.push(pe.addEvo.cpl(e[a],t,o,n,r,i,s));return u}s&pe.state.removeDoubles&&pe.aux.deleteConflictualEvo(e,t);var p=new pe.Evo(e,t,o,n,r,i,s);return pe.conf.listOfEvos.push(p),p.uid},std:function(e,t,o,n,r,i,s,u){return pe.addEvo.cpl(e,t,pe.range.fixed(o,n),r,i,s,u)},ani:function(e,t,o,n,r,i,s,u,a){var p=a?pe.state.removeDoubles:0;return pe.addEvo.cpl(e,t,pe.range.fixed(o,n),r,pe.bind.time(i,s),u,p)},sprite:function(e,t,o,n,r,i){if(e instanceof Array||e instanceof NodeList)for(var s=0;s<e.length;++s)e[s].style.backgroundImage="url('"+t+"')";else e.style.backgroundImage="url('"+t+"')";var u=i?pe.state.removeDoubles:0;return u|=pe.state.isPersitent,pe.addEvo.cpl(e,"style.backgroundPosition",pe.range.fixed(0,o*n),pe.syntax.suffix("px 0px"),pe.bind.stepTime(o,r),pe.shape.linear,u)},dragDrop:function(e,t){var o=pe.state.isPersitent;o|=pe.state.canUnderBound,o|=pe.state.canHoverBound,o|=pe.state.removeDoubles;var n=poyoCore_getAbsPos(e.parentNode);if(poyoCore_mouse.trackerStarted){var r=poyoCore_getAbsPos(e);n.x+=poyoCore_mouse.x-r.x,n.y+=poyoCore_mouse.y-r.y}else{var i=poyoCore_getInnerDim(e);n.x+=i.w/2,n.y+=i.h/2}var s=pe.addEvo.cpl(e,"style.left",pe.range.dynamic(function(){return-n.x},function(){return poyoCore_wWidth()-n.x}),pe.syntax.suffix("px"),pe.bind.mouse("x",.2),pe.shape.linear,!0,!0,!0,!0),u=pe.addEvo.cpl(e,"style.top",pe.range.dynamic(function(){return-n.y},function(){return poyoCore_wHeight()-n.y}),pe.syntax.suffix("px"),pe.bind.mouse("y",.2),pe.shape.linear,!0,!0,!0,!0),a=e.style.cursor;e.style.cursor="move";var p=function(){return!1},c=function(){return!0},f=function(){pe.delEvo(s),pe.delEvo(u),document.removeEventListener("mouseup",f),document.onselectstart=c,document.onmousedown=c,e.style.cursor=a,void 0!=t&&t()};return document.addEventListener("mouseup",f),document.onselectstart=p,document.onmousedown=p,!1},bgEffect:function(e,t){var o={low:0,high:100};0>t&&(t=-t,o={low:100,high:0});var n=poyoCore_getAbsPos(e),r=document.body.offsetHeight-poyoCore_wHeight(),i=poyoCore_wHeight()/r,s={low:n.y/r,high:(n.y+e.offsetHeight-i)/r};s.low-=i,s.high,pe.addEvo.std(e,"style.background-position",o.low,o.high,pe.syntax.bgPosition(gebid("img"),"y","%"),pe.overLay.expand(pe.bind.scrollBar(document.body,"y",t),s),pe.shape.linear,pe.state.isPersitent|pe.state.removeDoubles)}},setEvo:{callBack:function(e,t){var o=pe.aux.searchEvo(e);null!=o&&(pe.conf.listOfEvos[o].cbf=t)}},aux:{searchEvo:function(e){for(var t=0;t<pe.conf.listOfEvos.length&&pe.conf.listOfEvos[t].uid!=e;++t);return pe.conf.listOfEvos[t].uid==e?t:null},deleteConflictualEvo:function(e,t){for(var o=pe.conf.listOfEvos.length-1;o>=0;--o)e==pe.conf.listOfEvos[o].to&&t==pe.conf.listOfEvos[o].tp&&pe.conf.listOfEvos.splice(o,1)}}};pe.start();
