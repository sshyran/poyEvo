var pe={Evo:function(e,t,o,n,r,i,u,s,f){this.to=e,this.tp=t,this.rf=o,this.yf=n,this.bf=r,this.sf=i,this.cUB=u,this.cHB=s,this.iPe=f,this.cbf=null,this.uid=++pe.conf.counter},conf:{refreshTime:30,counter:0,listOfEvos:new Array},start:function(){var e;for(e=0;e<pe.conf.listOfEvos.length;++e){var t=pe.conf.listOfEvos[e],o=t.bf();0>o&&!t.cUB?poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(0))):o>1&&!t.cHB?(poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(1))),t.iPe||(pe.conf.listOfEvos.splice(e,1),null!=t.cbf&&t.cbf(),--e)):(o=t.sf(o),poyoCore_setAtribute(t.to,t.tp,t.yf(t.rf(o))))}setTimeout(pe.start,pe.conf.refreshTime)},range:{fixed:function(e,t){return function(o){return(1-o)*e+o*t}},dynamic:function(e,t){return function(o){return(1-o)*e()+o*t()}}},syntax:{prefix_suffix:function(e,t){return function(o){return e+""+o+t}},suffix:function(e){return pe.syntax.prefix_suffix("",e)},none:function(){return arguments[0]},grayscale:function(){return v=parseInt(arguments[0]),"rgb("+v+","+v+","+v+")"},bgPosition:function(e,t,o){return function(n){""==e.style.backgroundPosition&&(e.style.backgroundPosition="center center");var r=e.style.backgroundPosition.split(" ");return"x"==t?n+o+" "+r[1]:r[0]+" "+n+o}}},shape:{linear:function(){return arguments[0]},sin:function(){var e=arguments[0];return e+Math.sin(2*Math.PI*e-Math.PI)/(2*Math.PI)},asin:function(){var e=arguments[0];return e+Math.sin(2*Math.PI*e)/(2*Math.PI)},ela:function(){var e=arguments[0];return Math.sqrt(e)+(1-e)*Math.sin(4*e*Math.PI/3)},pow:function(e){return function(t){return Math.pow(t,e)}},apow:function(e){return function(t){return 1-Math.pow(1-t,e)}},step:function(e,t){return function(o){return o=e(o),o=parseInt(o*t)/t}}},bind:{time:function(e,t){var o=new Date;o=o.getTime();var n=o+e,r=n+t;return function(){var e=new Date;return e=e.getTime(),(e-n)/(r-n)}},rotativeTime:function(e,t,o){var n=2*(e+t);return function(){var r=new Date;return r=r.getTime()+o,r%=n,r=Math.abs(r-n/2)-e/2,r/t}},stepTime:function(e,t){var o=e*t*pe.conf.refreshTime;return function(){var t=new Date;return t=t.getTime()%o,t=parseInt(t/o*e),t/e}},randTime:function(e){var t,o=0;return function(){return 1>o&&(o=e,t=Math.random()),--o,t}},mouse:function(e,t){return poyoCore_trackMouse(),void 0==t?pe.bind.property(poyoCore_mouse,e,"x"==e?poyoCore_wWidth:poyoCore_wHeight):pe.bind.lazyProperty(poyoCore_mouse,e,"x"==e?poyoCore_wWidth:poyoCore_wHeight,t)},scrollBar:function(e,t,o){var n,r="x"==t?"scrollLeft":"scrollTop",i=document.body,u=document.documentElement;return e==i||e==u?(window.scrollBy(1,1),e=u&&u.scrollTop?u:i,window.scrollBy(-1,-1),n="x"==t?function(){return e.scrollWidth-poyoCore_wWidth()}:function(){return e.scrollHeight-poyoCore_wHeight()}):n="x"==t?function(){return e.scrollWidth-e.offsetWidth}:function(){return e.scrollHeight-e.offsetHeight},void 0==o?pe.bind.property(e,r,n):pe.bind.lazyProperty(e,r,n,o)},property:function(e,t,o){return function(){return poyoCore_getAtribute(e,t)/o()}},lazyProperty:function(e,t,o,n){var r=poyoCore_getAtribute(e,t);return function(){return r=(1-n)*r+n*poyoCore_getAtribute(e,t),r/o()}}},overLay:{expand:function(e,t){return function(){var o=e();return o-=t.low,o/=t.high-t.low}}},delEvo:function(e){if(e instanceof Array)for(var t=0;t<e.length;++t)pe.delEvo(e[t]);else{var o=pe.aux.searchEvo(e);null!=o&&pe.conf.listOfEvos.splice(o,1)}},addEvo:{cpl:function(e,t,o,n,r,i,u,s,f,a){if(e instanceof Array||e instanceof NodeList){for(var c=[],p=0;p<e.length;++p)c.push(pe.addEvo.cpl(e[p],t,o,n,r,i,u,s,f,a));return c}void 0!=a&&a&&pe.aux.deleteConflictualEvo(e,t);var l=new pe.Evo(e,t,o,n,r,i,u,s,f);return pe.conf.listOfEvos.push(l),l.uid},std:function(e,t,o,n,r,i,u,s,f,a,c){return pe.addEvo.cpl(e,t,pe.range.fixed(o,n),r,i,u,s,f,a,c)},ani:function(e,t,o,n,r,i,u,s,f){return pe.addEvo.cpl(e,t,pe.range.fixed(o,n),r,pe.bind.time(i,u),s,!1,!1,!1,f)},sprite:function(e,t,o,n,r,i){if(e instanceof Array||e instanceof NodeList)for(var u=0;u<e.length;++u)e[u].style.backgroundImage="url('"+t+"')";else e.style.backgroundImage="url('"+t+"')";return pe.addEvo.cpl(e,"style.backgroundPosition",pe.range.fixed(0,o*n),pe.syntax.suffix("px 0px"),pe.bind.stepTime(o,r),pe.shape.linear,!1,!1,!0,i)},dragDrop:function(e,t){var o=poyoCore_getAbsPos(e.parentNode);if(poyoCore_mouse.trackerStarted){var n=poyoCore_getAbsPos(e);o.x+=poyoCore_mouse.x-n.x,o.y+=poyoCore_mouse.y-n.y}else{var r=poyoCore_getInnerDim(e);o.x+=r.w/2,o.y+=r.h/2}var i=pe.addEvo.cpl(e,"style.left",pe.range.dynamic(function(){return-o.x},function(){return poyoCore_wWidth()-o.x}),pe.syntax.suffix("px"),pe.bind.mouse("x",.2),pe.shape.linear,!0,!0,!0,!0),u=pe.addEvo.cpl(e,"style.top",pe.range.dynamic(function(){return-o.y},function(){return poyoCore_wHeight()-o.y}),pe.syntax.suffix("px"),pe.bind.mouse("y",.2),pe.shape.linear,!0,!0,!0,!0),s=e.style.cursor;e.style.cursor="move";var f=function(){return!1},a=function(){return!0},c=function(){pe.delEvo(i),pe.delEvo(u),document.removeEventListener("mouseup",c),document.onselectstart=a,document.onmousedown=a,e.style.cursor=s,void 0!=t&&t()};return document.addEventListener("mouseup",c),document.onselectstart=f,document.onmousedown=f,!1},bgEffect:function(e,t){var o={low:0,high:100};0>t&&(t=-t,o={low:100,high:0});var n=poyoCore_getAbsPos(e),r=document.body.offsetHeight-poyoCore_wHeight(),i=poyoCore_wHeight()/r,u={low:n.y/r,high:(n.y+e.offsetHeight-i)/r};u.low-=i,u.high,pe.addEvo.std(e,"style.background-position",o.low,o.high,pe.syntax.bgPosition(gebid("img"),"y","%"),pe.overLay.expand(pe.bind.scrollBar(document.body,"y",t),u),pe.shape.linear,!1,!1,!0,!0)}},setEvo:{callBack:function(e,t){var o=pe.aux.searchEvo(e);null!=o&&(pe.conf.listOfEvos[o].cbf=t)}},aux:{searchEvo:function(e){for(var t=0;t<pe.conf.listOfEvos.length&&pe.conf.listOfEvos[t].uid!=e;++t);return pe.conf.listOfEvos[t].uid==e?t:null},deleteConflictualEvo:function(e,t){for(var o=pe.conf.listOfEvos.length-1;o>=0;--o)e==pe.conf.listOfEvos[o].to&&t==pe.conf.listOfEvos[o].tp&&pe.conf.listOfEvos.splice(o,1)}}};pe.start();
